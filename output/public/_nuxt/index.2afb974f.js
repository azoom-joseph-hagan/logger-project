import{f as h,a as k,g as w,c as V,_ as A,e as E}from"./dateFunctions.70fe0d2a.js";import{b as H,_ as I}from"./VGrid.66e072f5.js";import{_ as q,a as G,V as $}from"./VRow.35ae7891.js";import{f as y,V as J}from"./index.d28f81f2.js";import{V as K}from"./scopeId.b7c2c906.js";import{a as C,V as Q}from"./VCard.7fa848e6.js";import{d as b,t,L as i,A as l,x as a,y as m,v as f,a6 as j,O as T,M as N,B as x,z as n,a4 as X,r as p,c as Y,o as Z,H as B}from"./entry.33f0665f.js";import{u as ee}from"./VTextField.fd29ac10.js";const te={class:"d-flex flex-row justify-space-between align-center"},ae={class:"text-h6 font-weight-bold mx-2"},oe={class:"d-none d-sm-inline text-caption mx-2"},se={class:"w-100 d-flex bg-grey-lighten-2"},ne={key:0,class:"text-caption flex-grow-1 d-flex justify-center align-center"},le={class:"mx-2"},ce={class:"mx-2"},re=b({__name:"WeekViewRow",props:{dayData:{}},setup(W){return(o,c)=>{const d=q;return t(),i(C,null,{default:l(()=>[a("div",te,[a("p",ae,m(o.dayData.day),1),a("p",oe,m(o.dayData.date),1),a("div",se,[+o.dayData.percentageTrackedTime.toFixed(0)==0?(t(),f("div",ne,m(o.dayData.percentageTrackedTime.toFixed(0))+"% ",1)):j("",!0),(t(!0),f(T,null,N(o.dayData.trackedProjects,(e,r)=>(t(),i(d,{key:r,compact:"",percentage:e.percent,barColor:e.color,project:e.project},null,8,["percentage","barColor","project"]))),128))]),a("div",le,[+o.dayData.percentageTrackedTime.toFixed(0)==100?(t(),i(y,{key:0,size:"x-large",color:"success"},{default:l(()=>[x("mdi-check-circle")]),_:1})):o.dayData.totalLoggedTimeMins===0?(t(),i(y,{key:1,size:"x-large",color:"grey"},{default:l(()=>[x("mdi-minus-circle")]),_:1})):(t(),i(y,{key:2,size:"x-large",color:"error"},{default:l(()=>[x("mdi-close-circle")]),_:1}))]),a("div",ce,[n(J,{icon:"mdi-timer-edit",variant:"tonal",size:"small",onClick:c[0]||(c[0]=e=>o.$emit("button-clicked"))})])]),n(K,{class:"mt-4"})]),_:1})}}}),ie={class:"d-flex justify-center align-center py-4"},de={class:"d-flex flex-column justify-center align-center"},ue={class:"d-flex"},_e={class:"text-subtitle-2 text-md-h5 text-center font-weight-bold mb-5 mx-3 my-2"},me={class:"inline-block"},fe={key:0},pe={key:1},ve=a("p",null,"No data",-1),ge=[ve],be=b({__name:"index",setup(W){var D;const o=X(),c=ee(),d=p(null),e=p(c.getLastUsedDate()||h(new Date)),r=Y(()=>c.getCurrentUser()),u=p(k(((D=r.value)==null?void 0:D.projectData)||[],e.value));Z(()=>{r.value&&c.setCurrentUser(r.value.id)});const v=p(w(e.value));B(r,s=>{s&&(u.value=k(s.projectData,e.value))}),B(d,s=>{e.value=h(s),v.value=w(e.value),r.value&&(u.value=k(r.value.projectData,e.value)),c.setLastUsedDate(e.value)});const L=s=>{c.setLastUsedDate(s),o.push({path:`/day/${s}`})},R=()=>{d.value=V(e.value,"forward")},z=()=>{d.value=V(e.value,"backward")},S=s=>{d.value=h(s)};return(s,he)=>{const U=A,F=H,M=I,O=E,P=re;return t(),i($,null,{default:l(()=>[u.value?(t(),i(G,{key:0},{default:l(()=>[n(C,null,{default:l(()=>[a("div",ie,[a("div",de,[a("div",ue,[n(U,{formattedDate:e.value,onDateSelected:S},null,8,["formattedDate"]),n(F)]),n($,{class:"mt-2"},{default:l(()=>{var _,g;return[n(M,{handleBack:z}),a("div",_e,[a("p",me,m((_=v.value)==null?void 0:_.firstDayOfWeek)+" - "+m((g=v.value)==null?void 0:g.lastDayOfWeek),1)]),n(O,{handleNext:R})]}),_:1})])]),n(Q,{color:"grey-lighten-3 mx-auto","max-width":"800"},{default:l(()=>[u.value.length!==0?(t(),f("div",fe,[(t(!0),f(T,null,N(u.value,(_,g)=>(t(),i(P,{dayData:_,onButtonClicked:ke=>L(_.date)},null,8,["dayData","onButtonClicked"]))),256))])):(t(),f("div",pe,ge))]),_:1})]),_:1})]),_:1})):j("",!0)]),_:1})}}});export{be as default};

import{V as Ve,a as Re,_ as Te,b as we}from"./VGrid.66e072f5.js";import{d as N,t as x,v as R,x as _,y as F,O as fe,M as me,L as B,_ as pe,Q as ge,R as Q,r as E,z as f,S as se,T as Ae,U as De,V as ze,W as z,c as g,X as Fe,H as he,Y as Ee,Z as Me,$ as $e,A as y,N as k,a0 as X,a1 as Ie,a2 as Be,B as K,C as Oe,D as He,a3 as Ne,a4 as Ge,a5 as Le,a6 as H}from"./entry.33f0665f.js";import{_ as Je,V as Y,a as q}from"./VRow.35ae7891.js";import{m as _e,u as ye,a as Ue,b as We,c as Xe,d as ne,e as re,f as ce,g as Ye,h as qe,V as xe}from"./index.d28f81f2.js";import{V as Ke}from"./VCard.7fa848e6.js";import{m as Qe,c as Ze,f as et,V as tt,u as lt}from"./VTextField.fd29ac10.js";import{V as at}from"./scopeId.b7c2c906.js";const ot={class:"mt-1 mt-sm-2 bg-grey-lighten-3 pa-2 rounded"},st={class:"text-subtitle-1 text-center"},nt={class:"text-h6 text-md-h5 text-center"},rt=N({__name:"DayStatistic",props:{title:{},displayData:{}},setup(l){return(o,e)=>(x(),R("div",ot,[_("p",st,F(o.title),1),_("p",nt,F(o.displayData),1)]))}}),ct={class:"flex-fill d-flex ma-1 pa-1 text-center mx-auto maxWidth"},ut=N({__name:"DayProgressBar",props:{dailyTrackedProjects:{},deleteProjectSection:{type:Function}},setup(l){return(o,e)=>{const t=Je;return x(),R("div",ct,[(x(!0),R(fe,null,me(o.dailyTrackedProjects,(s,v)=>(x(),B(t,{key:v,percentage:s.percent,barColor:s.color,project:s.project,onDeleteSection:o.deleteProjectSection},null,8,["percentage","barColor","project","onDeleteSection"]))),128))])}}});const it=pe(ut,[["__scopeId","data-v-36b5a12f"]]),Z=(l,o,e=!1)=>{if(!l)return 0;const t=(l/o*100).toFixed(1);return e?Math.floor(t):t},dt=(l,o)=>{if(!l)return null;const e=[vt,ft,mt];o&&e.push(pt);for(const t of e){const s=t(l.replace(/\s+/g,""),o);if(s)return s}},vt=(l,o)=>{if(!/^(\d+\.?\d*?)$/.test(l))return null;const e=Number(l),t=Z(e,o);return{time:e,percentage:t}},ft=(l,o)=>{if(!/^((\d+\.?\d*?)(h|m))+$/gi.test(l))return null;const e=l.match(/\d+\.?\d*?h/g),t=e?e.map(a=>Number(a.substr(0,a.length-1))):[],s=l.match(/\d+\.?\d*?m/g),v=s?s.map(a=>Number(a.substr(0,a.length-1))):[],n=t.map(a=>a*60).concat(v).reduce((a,u)=>a+u,0),d=Z(n,o);return{time:n,percentage:d}},mt=(l,o)=>{const e=/^(\d{1,2}):(\d{1,2})?$/.exec(l);if(!e)return null;const t=Number(e[1])*60+Number(e[2]||0),s=Z(t,o);return{time:t,percentage:s}},pt=(l,o)=>{const e=/^(\d+\.?\d*?)%$/.exec(l);if(!e)return null;const t=Number(e[1]);return{time:Math.floor(t/100*o),percentage:t}},gt=ge({..._e(),...Qe()},"VForm"),ht=Q()({name:"VForm",props:gt(),emits:{"update:modelValue":l=>!0,submit:l=>!0},setup(l,o){let{slots:e,emit:t}=o;const s=Ze(l),v=E();function n(a){a.preventDefault(),s.reset()}function d(a){const u=a,r=s.validate();u.then=r.then.bind(r),u.catch=r.catch.bind(r),u.finally=r.finally.bind(r),t("submit",u),u.defaultPrevented||r.then(i=>{var C;let{valid:b}=i;b&&((C=v.value)==null||C.submit())}),u.preventDefault()}return ye(()=>{var a;return f("form",{ref:v,class:["v-form",l.class],style:l.style,novalidate:!0,onReset:n,onSubmit:d},[(a=e.default)==null?void 0:a.call(e,s)])}),et(s,v)}});function ue(l){const e=Math.abs(l);return Math.sign(l)*(e/((1/.501-2)*(1-e)+1))}function ie(l){let{selectedElement:o,containerSize:e,contentSize:t,isRtl:s,currentScrollOffset:v,isHorizontal:n}=l;const d=n?o.clientWidth:o.clientHeight,a=n?o.offsetLeft:o.offsetTop,u=s&&n?t-a-d:a,r=e+v,i=d+u,b=d*.4;return u<=v?v=Math.max(u-b,0):r<=i&&(v=Math.min(v-(r-i-b),t-e)),v}function _t(l){let{selectedElement:o,containerSize:e,contentSize:t,isRtl:s,isHorizontal:v}=l;const n=v?o.clientWidth:o.clientHeight,d=v?o.offsetLeft:o.offsetTop,a=s&&v?t-d-n/2-e/2:d+n/2-e/2;return Math.min(t-e,Math.max(0,a))}const be=Symbol.for("vuetify:v-slide-group"),yt=ge({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:be},nextIcon:{type:se,default:"$next"},prevIcon:{type:se,default:"$prev"},showArrows:{type:[Boolean,String],validator:l=>typeof l=="boolean"||["always","desktop","mobile"].includes(l)},..._e(),...Ae(),...Ue(),...We({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),xt=Q()({name:"VSlideGroup",props:yt(),emits:{"update:modelValue":l=>!0},setup(l,o){let{slots:e}=o;const{isRtl:t}=De(),{displayClasses:s,mobile:v}=ze(l),n=Xe(l,l.symbol),d=z(!1),a=z(0),u=z(0),r=z(0),i=g(()=>l.direction==="horizontal"),{resizeRef:b,contentRect:C}=ne(),{resizeRef:p,contentRect:j}=ne(),O=g(()=>n.selected.value.length?n.items.value.findIndex(c=>c.id===n.selected.value[0]):-1),G=g(()=>n.selected.value.length?n.items.value.findIndex(c=>c.id===n.selected.value[n.selected.value.length-1]):-1);if(Fe){let c=-1;he(()=>[n.selected.value,C.value,j.value,i.value],()=>{cancelAnimationFrame(c),c=requestAnimationFrame(()=>{if(C.value&&j.value){const m=i.value?"width":"height";u.value=C.value[m],r.value=j.value[m],d.value=u.value+1<r.value}if(O.value>=0&&p.value){const m=p.value.children[G.value];O.value===0||!d.value?a.value=0:l.centerActive?a.value=_t({selectedElement:m,containerSize:u.value,contentSize:r.value,isRtl:t.value,isHorizontal:i.value}):d.value&&(a.value=ie({selectedElement:m,containerSize:u.value,contentSize:r.value,isRtl:t.value,currentScrollOffset:a.value,isHorizontal:i.value}))}})})}const T=z(!1);let h=0,V=0;function M(c){const m=i.value?"clientX":"clientY";V=(t.value&&i.value?-1:1)*a.value,h=c.touches[0][m],T.value=!0}function $(c){if(!d.value)return;const m=i.value?"clientX":"clientY",S=t.value&&i.value?-1:1;a.value=S*(V+h-c.touches[0][m])}function w(c){const m=r.value-u.value;a.value<0||!d.value?a.value=0:a.value>=m&&(a.value=m),T.value=!1}function L(){b.value&&(b.value[i.value?"scrollLeft":"scrollTop"]=0)}const A=z(!1);function I(c){if(A.value=!0,!(!d.value||!p.value)){for(const m of c.composedPath())for(const S of p.value.children)if(S===m){a.value=ie({selectedElement:S,containerSize:u.value,contentSize:r.value,isRtl:t.value,currentScrollOffset:a.value,isHorizontal:i.value});return}}}function Pe(c){A.value=!1}function ke(c){var m;!A.value&&!(c.relatedTarget&&((m=p.value)!=null&&m.contains(c.relatedTarget)))&&P()}function Ce(c){p.value&&(i.value?c.key==="ArrowRight"?P(t.value?"prev":"next"):c.key==="ArrowLeft"&&P(t.value?"next":"prev"):c.key==="ArrowDown"?P("next"):c.key==="ArrowUp"&&P("prev"),c.key==="Home"?P("first"):c.key==="End"&&P("last"))}function P(c){var m,S,le,ae,oe;if(p.value)if(!c)(m=Ee(p.value)[0])==null||m.focus();else if(c==="next"){const D=(S=p.value.querySelector(":focus"))==null?void 0:S.nextElementSibling;D?D.focus():P("first")}else if(c==="prev"){const D=(le=p.value.querySelector(":focus"))==null?void 0:le.previousElementSibling;D?D.focus():P("last")}else c==="first"?(ae=p.value.firstElementChild)==null||ae.focus():c==="last"&&((oe=p.value.lastElementChild)==null||oe.focus())}function J(c){const m=a.value+(c==="prev"?-1:1)*u.value;a.value=Me(m,0,r.value-u.value)}const je=g(()=>{let c=a.value>r.value-u.value?-(r.value-u.value)+ue(r.value-u.value-a.value):-a.value;a.value<=0&&(c=ue(-a.value));const m=t.value&&i.value?-1:1;return{transform:`translate${i.value?"X":"Y"}(${m*c}px)`,transition:T.value?"none":"",willChange:T.value?"transform":""}}),U=g(()=>({next:n.next,prev:n.prev,select:n.select,isSelected:n.isSelected})),W=g(()=>{switch(l.showArrows){case"always":return!0;case"desktop":return!v.value;case!0:return d.value||Math.abs(a.value)>0;case"mobile":return v.value||d.value||Math.abs(a.value)>0;default:return!v.value&&(d.value||Math.abs(a.value)>0)}}),ee=g(()=>Math.abs(a.value)>0),te=g(()=>r.value>Math.abs(a.value)+u.value);return ye(()=>f(l.tag,{class:["v-slide-group",{"v-slide-group--vertical":!i.value,"v-slide-group--has-affixes":W.value,"v-slide-group--is-overflowing":d.value},s.value,l.class],style:l.style,tabindex:A.value||n.selected.value.length?-1:0,onFocus:ke},{default:()=>{var c,m,S;return[W.value&&f("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ee.value}],onClick:()=>ee.value&&J("prev")},[((c=e.prev)==null?void 0:c.call(e,U.value))??f(re,null,{default:()=>[f(ce,{icon:t.value?l.nextIcon:l.prevIcon},null)]})]),f("div",{key:"container",ref:b,class:"v-slide-group__container",onScroll:L},[f("div",{ref:p,class:"v-slide-group__content",style:je.value,onTouchstartPassive:M,onTouchmovePassive:$,onTouchendPassive:w,onFocusin:I,onFocusout:Pe,onKeydown:Ce},[(m=e.default)==null?void 0:m.call(e,U.value)])]),W.value&&f("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!te.value}],onClick:()=>te.value&&J("next")},[((S=e.next)==null?void 0:S.call(e,U.value))??f(re,null,{default:()=>[f(ce,{icon:t.value?l.prevIcon:l.nextIcon},null)]})])]}})),{selected:n.selected,scrollTo:J,scrollOffset:a,focus:P}}}),bt=Q()({name:"VSlideGroupItem",props:Ye(),emits:{"group:selected":l=>!0},setup(l,o){let{slots:e}=o;const t=qe(l,be);return()=>{var s;return(s=e.default)==null?void 0:s.call(e,{isSelected:t.isSelected.value,select:t.select,toggle:t.toggle,selectedClass:t.selectedClass.value})}}}),Se=l=>(Oe("data-v-815e65e7"),l=l(),He(),l),St=Se(()=>_("h3",{class:"my-2"},"Recent Projects:",-1)),Pt=Se(()=>_("h3",{class:"my-2"},"All Projects:",-1)),kt=N({__name:"AllProjectAutocomplete",props:{projectData:{},recentProjects:{},addProjectPercentage:{type:Function},totalLoggedHours:{}},emits:["setError"],setup(l,{emit:o}){const e=E(""),t=E(null),s=E(!1),v=E(null);he(t,async u=>{t.value?(s.value=!0,await $e(),v.value&&v.value.focus()):s.value=!1});const n=l,d=o,a=u=>{if(!t.value){d("setError","Please select a project"),e.value="";return}if(u==0){d("setError","Enter a number greater than 0"),e.value="";return}const r=dt(u,n.totalLoggedHours);if(r)t.value&&n.addProjectPercentage(r.time,t.value.name,`bg-${t.value.color}`,t.value.trueColor);else{d("setError","Enter in the correct formats: (Minutes: 60. Hours: 1h, 1:30, or Percentage: 25%)");return}e.value=""};return(u,r)=>(x(),B(Re,{class:"mx-auto px-2","max-width":"800"},{default:y(()=>[St,f(xt,{modelValue:k(t),"onUpdate:modelValue":r[0]||(r[0]=i=>X(t)?t.value=i:null),class:"pa-0 pa-sm-1","center-active":"","selected-class":"elevation-3 selected","show-arrows":""},{default:y(()=>[(x(!0),R(fe,null,me(u.recentProjects,(i,b)=>(x(),B(bt,{key:i.name,value:i},{default:y(({isSelected:C,toggle:p,selectedClass:j})=>[f(Ke,{color:i.color,class:Ie(["ma-1 my-2 size-class",j]),onClick:p,title:i.name},null,8,["color","class","onClick","title"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Pt,_("div",null,[f(Ve,{modelValue:k(t),"onUpdate:modelValue":r[1]||(r[1]=i=>X(t)?t.value=i:null),"auto-select-first":"",density:"comfortable","hide-details":"auto",clearable:"",placeholder:"Select a project",items:u.projectData,"item-title":"name","item-value":"name","return-object":"",variant:"outlined"},null,8,["modelValue","items"]),f(ht,{class:"d-flex align-center mt-3",onSubmit:r[4]||(r[4]=Be(i=>a(k(e)),["prevent"]))},{default:y(()=>[f(tt,{class:"flex-grow-1 pr-2",clearable:"",label:"Tracked Time",modelValue:k(e),"onUpdate:modelValue":r[2]||(r[2]=i=>X(e)?e.value=i:null),density:"comfortable",hint:"Enter a number in (Minutes: 60. Hours: 1h, 1:30, or Percentage: 25%)",variant:"outlined",disabled:!k(s),ref_key:"textFieldRef",ref:v},null,8,["modelValue","disabled"]),f(xe,{class:"align-self-stretch",height:"47",color:"success",variant:"flat",onClick:r[3]||(r[3]=i=>a(k(e))),disabled:!k(s)},{default:y(()=>[K("Add")]),_:1},8,["disabled"])]),_:1})])]),_:1}))}});const Ct=pe(kt,[["__scopeId","data-v-815e65e7"]]);function de(l){const o=Math.floor(l/60),e=l%60;return`${o} hrs ${e} min`}const ve=[{name:"PRJ1",color:"red-lighten-3",trueColor:"#EF9A9A"},{name:"PRJ2",color:"pink-lighten-3",trueColor:"#F48FB1"},{name:"PRJ3",color:"purple-lighten-4",trueColor:"#E1BEE7"},{name:"PRJ4",color:"deep-purple-lighten-4",trueColor:"#D1C4E9"},{name:"PRJ5",color:"indigo-lighten-4",trueColor:"#C5CAE9"},{name:"PRJ6",color:"blue-lighten-3",trueColor:"#90CAF9"},{name:"PRJ7",color:"cyan-lighten-3",trueColor:"#80DEEA"},{name:"PRJ8",color:"teal-lighten-3",trueColor:"#80CBC4"},{name:"PRJ9",color:"green-lighten-3",trueColor:"#A5D6A7"},{name:"PRJ10",color:"light-green-lighten-3",trueColor:"#C5E1A5"}];function jt(l,o){let e=[...l];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e.slice(0,o)}const Vt={class:"d-flex align-center justify-center align-center mb-4"},Rt={class:"d-flex flex-md-row align-center"},Tt={class:"text-h5"},wt={class:"text-md-h6 ml-2 text-grey-darken-1"},At={key:0,class:"d-sm-flex ga-sm-10"},Dt={key:0,class:"text-red text-center font-weight-bold text-body-2 ml-2"},zt={class:"d-flex justify-center"},Ft={key:0,class:"text-h6 mt-3"},Nt=N({__name:"[date]",setup(l){const o=Ne(),e=Ge(),t=lt(),s=o.params.date,v=E(""),n=g(()=>t.getCurrentUser()),d=g(()=>{if(n.value)return t.getCurrentDay(n.value.id,s)}),a=g(()=>{var h;if(n.value)return t.getDailyTotalMins((h=n.value)==null?void 0:h.id,s)}),u=g(()=>{if(n.value)return t.getDailyTrackedMins(n.value.id,s)}),r=g(()=>d.value&&d.value.trackedProjects.length>0),i=(h,V,M,$)=>{if(!d||!a){console.log("Missing variable");return}if(u.value+h>a.value){v.value="Project total exceeds time worked. Please remove some projects or add more tracked time";return}else{const w={mins:h,project:V,color:M,trueColor:$};n.value&&t.pushProjectData(n.value.id,s,w)}},b=h=>{v.value=h},C=h=>{if(n.value)return t.deleteProjectData(n.value.id,s,h)},p=g(()=>de(a.value)),j=g(()=>de(u.value)),O=ve,G=jt(ve,5),T=()=>{e.back()};return Le("addProjectPercentage",i),(h,V)=>{const M=Te,$=we,w=rt,L=it,A=Ct;return x(),B(Y,{"max-width":"800",class:"my-1"},{default:y(()=>[f(q,null,{default:y(()=>[f(Y,{"no-gutters":"",class:"d-flex justify-space-between align-center"},{default:y(()=>[f(q,{class:"d-flex flex-grow-1 flex-shrink-0 align-center justify-center text-center ga-2"},{default:y(()=>{var I;return[_("div",null,[_("div",Vt,[f(M,{class:"floatingBtn",handleBack:T,variant:"text"}),_("div",Rt,[_("span",Tt,F((I=d.value)==null?void 0:I.day),1),_("span",wt,"("+F(k(s))+")",1)])]),f($),d.value?(x(),R("div",At,[f(w,{title:"Total logged time:",displayData:p.value},null,8,["displayData"]),f(w,{title:"Current allocated time:",displayData:j.value},null,8,["displayData"])])):H("",!0)])]}),_:1})]),_:1}),_("div",null,[v.value?(x(),R("p",Dt,[K(F(v.value)+" ",1),f(xe,{variant:"flat",color:"red",onClick:V[0]||(V[0]=I=>v.value="")},{default:y(()=>[K("OK")]),_:1})])):H("",!0)]),f(at,{class:"border-opacity-25 mx-auto my-4",inset:""}),_("div",zt,[d.value?(x(),R("p",Ft,F(d.value.percentageTrackedTime.toFixed(0))+" % ",1)):H("",!0)]),f(Y,{"max-width":"800",class:"mt-2"},{default:y(()=>[r.value?(x(),B(q,{key:0},{default:y(()=>[f(L,{dailyTrackedProjects:d.value.trackedProjects,deleteProjectSection:C},null,8,["dailyTrackedProjects"])]),_:1})):H("",!0)]),_:1}),f(A,{projectData:k(O),recentProjects:k(G),addProjectPercentage:i,totalLoggedHours:a.value,onSetError:b},null,8,["projectData","recentProjects","totalLoggedHours"])]),_:1})]),_:1})}}});export{Nt as default};

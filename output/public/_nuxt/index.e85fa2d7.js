import{u as E,T as k}from"./VTextField.fd29ac10.js";import{V as B,i as R}from"./index.d28f81f2.js";import{d as M,c as u,r as h,H as D,t as p,L as q,A as b,z as s,B as P,N as a,a0 as z,i as G,v as y,x as m,y as C,O as I}from"./entry.33f0665f.js";import{f as $,g as S,a as J,b as K,c as O,d as L,_ as Q,e as X}from"./dateFunctions.70fe0d2a.js";import{b as Y,_ as Z}from"./VGrid.66e072f5.js";import"./scopeId.b7c2c906.js";const ee=M({__name:"WeekMonthToggleBtn",setup(V){const n=E(),i=u(()=>n.getViewMode()),e=h(i.value);return D(e,r=>{n.updateViewMode(e.value)}),(r,o)=>(p(),q(R,{modelValue:a(e),"onUpdate:modelValue":o[0]||(o[0]=d=>z(e)?e.value=d:null),color:"primary",mandatory:"",rounded:"100",variant:"text",density:"compact"},{default:b(()=>[s(B,{density:"compact"},{default:b(()=>[P("週")]),_:1}),s(B,{density:"compact"},{default:b(()=>[P("月")]),_:1})]),_:1},8,["modelValue"]))}}),te={key:0,class:"d-flex justify-center"},ae=m("p",{class:"text-grey-darken-2"},"No Data",-1),oe=[ae],se={key:1,class:"chart mx-auto"},ne={class:"d-flex justify-end"},le={key:0},re={key:1},ce=M({__name:"Charts",props:{displayData:{}},setup(V){const n=h(1),i=V,e=u(()=>i.displayData);function r(t){const c={};return t.forEach(f=>{f.trackedProjects.forEach(l=>{c[l.project]||(c[l.project]={mins:0,color:l.color,trueColor:l.trueColor}),c[l.project].mins+=l.mins})}),Object.entries(c).map(([f,l])=>({name:f,value:l.mins,color:l.color,trueColor:l.trueColor}))}const o=u(()=>r(e.value)),d=u(()=>o.value.map(t=>t.name)),v=u(()=>o.value.map(t=>t.value)),g=u(()=>o.value.map(t=>t.trueColor)),w=h(v),j=u(()=>[{name:"Time",data:v.value}]),x=u(()=>({labels:d.value,legend:{position:"bottom"},chart:{toolbar:{show:!1}},colors:g.value,plotOptions:{bar:{distributed:!0}},dataLabels:{style:{colors:["#2f2f30"]},dropShadow:{enabled:!1}}}));return(t,c)=>{const _=G("apexchart");return a(o).length===0?(p(),y("div",te,oe)):(p(),y("div",se,[m("div",ne,[s(R,{modelValue:a(n),"onUpdate:modelValue":c[0]||(c[0]=f=>z(n)?n.value=f:null),color:"primary",mandatory:"",rounded:"100",variant:"tonal",density:"compact"},{default:b(()=>[s(B,{density:"comfortable",icon:"mdi-chart-pie"}),s(B,{density:"comfortable",icon:"mdi-chart-bar"})]),_:1},8,["modelValue"])]),a(n)?(p(),y("div",le,[s(_,{type:"bar",options:a(x),series:a(j)},null,8,["options","series"])])):(p(),y("div",re,[s(_,{type:"donut",options:a(x),series:a(w)},null,8,["options","series"])]))]))}}});const ie={class:"d-flex justify-center pl-2 pt-2"},ue={class:"d-flex justify-center flex-column align-center px-5 py-10"},de={class:"d-flex"},_e={class:"py-2 d-flex align-center ga-5"},me={key:0},pe={class:"text-subtitle-2 text-md-h5"},ve={key:1},fe={class:"text-subtitle-2 text-md-h5"},be=M({__name:"index",setup(V){const n=E(),i=h(null),e=h(n.getLastUsedDate()||$(new Date)),r=u(()=>n.getCurrentUser()),o=u(()=>n.getViewMode()),d=(t,c)=>{if(t)return c===k.Week?J(t,e.value):K(t,e.value)},v=h(d(r.value.projectData,o.value));D(o,t=>{v.value=d(r.value.projectData,o.value)});const g=h(S(e.value)),w=t=>{i.value=$(t)};D(r,(t,c)=>{var _;v.value=d((_=r.value)==null?void 0:_.projectData,o.value)}),D(i,t=>{e.value=$(t),g.value=S(e.value),v.value=d(r.value.projectData,o.value),n.setLastUsedDate(e.value)});const j=()=>{o.value===k.Week?i.value=O(e.value,"forward"):i.value=L(e.value,"forward")},x=()=>{o.value===k.Week?i.value=O(e.value,"backward"):i.value=L(e.value,"backward")};return(t,c)=>{var T,W,U,N;const _=ee,f=Q,l=Y,A=Z,F=X,H=ce;return p(),y(I,null,[m("div",ie,[s(_)]),m("div",ue,[m("div",de,[s(f,{formattedDate:a(e),onDateSelected:w},null,8,["formattedDate"]),s(l,{name:(T=a(r))==null?void 0:T.name,image:(W=a(r))==null?void 0:W.image},null,8,["name","image"])]),m("div",_e,[s(A,{handleBack:x}),a(o)===a(k).Week?(p(),y("div",me,[m("p",pe,C((U=a(g))==null?void 0:U.firstDayOfWeek)+" - "+C((N=a(g))==null?void 0:N.lastDayOfWeek),1)])):(p(),y("div",ve,[m("p",fe,C(a(e).substring(0,7)),1)])),s(F,{handleNext:j})])]),s(H,{displayData:a(v)},null,8,["displayData"])],64)}}});export{be as default};
